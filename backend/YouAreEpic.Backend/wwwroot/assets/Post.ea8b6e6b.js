import{a as m}from"./index.fa753d9e.js";import{o as i,c as u,a,m as p,v as c,l as f,F as g,p as h,h as x}from"./vendor.260b2556.js";import{_}from"./index.278ab0a0.js";import"./axios.c5189851.js";const v={name:"Post",methods:{countChar(){document.querySelector("textarea").addEventListener("input",({currentTarget:e})=>{e.getAttribute("maxlength");const n=e.value.length;document.getElementById("current").innerText=n})},loadFile(t){console.log(t),Array.from(t.target.files).forEach(e=>{var n=document.getElementById("output");const l=document.createElement("img");l.src=URL.createObjectURL(e),n.appendChild(l)}),this.files=Array.from(t.target.files)},async submit(){var t=new FormData;this.files.forEach(e=>{t.append("files",e)}),t.append("text",this.textInput),t.append("ammount",this.ammount),t.append("ngoid",this.ngoid),m.post("/api/twitter/tweet",t,{headers:{"Content-Type":"multipart/form-data","Access-Control-Allow-Origin":"*"}}).then(e=>{var n=e.data;this.$router.push({name:"PostSuccess",query:n})}).catch(e=>console.error(e))}},mounted(){this.ammount=this.$route.query.ammount,this.ngoid=this.$route.query.ngo},data(){return{ammount:0,ngoid:null,file:[],text:0,textInput:null,fileUploaded:!1}}},d=t=>(h("data-v-c77e3aac"),t=t(),x(),t),y=d(()=>a("div",{style:{"margin-bottom":"10px"}},[a("span",{id:"current"},"0 "),a("span",{id:"maximum"},"/ 280")],-1)),I={class:"submitWrapper"},b=d(()=>a("label",{for:"file-upload",class:"custom-file-upload"}," Bild / Video hochladen ",-1)),C={key:0,id:"output",class:"ImageContainer"},w={class:"wrap"};function B(t,e,n,l,s,r){return i(),u(g,null,[a("div",null,[a("label",null,[p(a("textarea",{class:"textarea",onInput:e[0]||(e[0]=(...o)=>r.countChar&&r.countChar(...o)),"onUpdate:modelValue":e[1]||(e[1]=o=>s.textInput=o),maxlength:"280",placeholder:"Text"},`\r
    `,544),[[c,s.textInput]])]),y]),a("div",I,[b,a("input",{id:"file-upload",onClick:e[2]||(e[2]=o=>s.fileUploaded=!0),enctype:"multipart/form-data",type:"file",accept:"image/gif,image/png,image/jpeg,image/webp,video/mp4",multiple:"",onChange:e[3]||(e[3]=(...o)=>r.loadFile&&r.loadFile(...o))},null,32),s.fileUploaded?(i(),u("div",C)):f("",!0)]),a("div",w,[a("button",{class:"dialogButton",onClick:e[4]||(e[4]=(...o)=>r.submit&&r.submit(...o))},"Tweet posten")])],64)}var k=_(v,[["render",B],["__scopeId","data-v-c77e3aac"]]);export{k as default};
